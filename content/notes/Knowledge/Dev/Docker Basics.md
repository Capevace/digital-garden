
# Docker Basics
#dev #linux 

- [[#Base Node.js Dockerfile|Base Node.js Dockerfile]]
- [[#Build Image|Build Image]]
- [[#Running Image|Running Image]]
- [[#Printing Output|Printing Output]]
- [[#SSH into Container|SSH into Container]]
- [[#List Images|List Images]]
- [[#Purging large files generated by Docker|Purging large files generated by Docker]]
- [[#Links|Links]]

## Base Node.js Dockerfile

```dockerfile
FROM node:16

# Create app directory
WORKDIR /usr/src/app

COPY package*.json ./
RUN npm install

COPY . .

EXPOSE 8080

CMD [ "node", "start.js" ]
```


## Build Image

```shell
docker build . -t <your username>/node-web-app
```


## Running Image

```shell
docker run -p 49160:8080 -d <your username>/node-web-app
```

## Printing Output

```shell
# Get container ID
$ docker ps

# Example
ID            IMAGE                                COMMAND    ...   PORTS
ecce33b30ebf  <your username>/node-web-app:latest  npm start  ...   49160->8080

# Print app output
$ docker logs <container id>

# Example
Running on http://localhost:8080
```

## SSH into Container

```shell
# Enter the container
$ docker exec -it <container id> /bin/bash
```

## List Images

```shell
$ docker images

# Example
REPOSITORY                      TAG        ID              CREATED
node                            16         3b66eb585643    5 days ago
<your username>/node-web-app    latest     d64d3505b0d2    1 minute ago
```


## Purging large files generated by Docker

Docker sometimes generates container and image files in the tens of GBs.

These can be found in `/var/lib/docker/*` (at least on Linux).

See [[Directory Sizes (du)]] to find specific directories that are large and remove them.

The command `docker purge` can also be used.

## Links

[Dockerizing a Node.js web app | Node.js](https://nodejs.org/en/docs/guides/nodejs-docker-webapp)
<div class="rich-link-card-container"><a class="rich-link-card" href="https://nodejs.org/en/docs/guides/nodejs-docker-webapp/" target="_blank">
	<div class="rich-link-card-text">
		<h1 class="rich-link-card-title">Dockerizing a Node.js web app | Node.js</h1>
		<p class="rich-link-card-description">
		Node.jsÂ® is a JavaScript runtime built on Chrome's V8 JavaScript engine.
		</p>
		<p class="rich-link-href">
		https://nodejs.org/en/docs/guides/nodejs-docker-webapp/
		</p>
	</div>
</a></div>